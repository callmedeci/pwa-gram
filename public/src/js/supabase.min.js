let SUPABASE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhhY2Z3bmF2dXNtcXR1YmR0a2FuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwMDY4NjAsImV4cCI6MjA3MDU4Mjg2MH0.iALosAfpwYK8lMx3gpHj0NZ4RZdw5e6eYqD2vVdobyc",supabaseUrl="https://hacfwnavusmqtubdtkan.supabase.co",supabaseKey=SUPABASE_KEY,supabaseDB=supabase.createClient(supabaseUrl,supabaseKey);async function saveSubscriptionToSupabase(a){var a={endpoint:a.endpoint,keys:{p256dh:arrayBufferToBase64(a.getKey("p256dh")),auth:arrayBufferToBase64(a.getKey("auth"))}},{data:a,error:e}=await supabaseDB.from("subscriptions").insert(a).select().single();if(e)throw new Error("Error saving subscription:",e);return a}async function sendNotification(a){var{data:a,error:e}=await supabaseDB.functions.invoke("rapid-processor",{body:a});if(e)throw new Error("Error sending notification:",e);console.log("Notification sent successfully:",a)}async function getAllPosts(){return supabaseDB.from("posts").select("*").then(a=>{if(a.error)throw new Error(a.error.message);return a.data})}async function createNewPost(a){var e=(Math.random()+"-"+a.image.name).replaceAll("/",""),s="https://hacfwnavusmqtubdtkan.supabase.co/storage/v1/object/public/post-images/"+e,{data:s,error:r}=await supabaseDB.from("posts").insert({...a,image:s});if(r)throw new Error("Something bad happened!");r=(await supabaseDB.storage.from("post-images").upload(e,a.image)).storageError;if(r)throw supabaseDB.from("posts").delete().eq("id",s.id),new Error("Failed to store your image! "+r);return s}