let enableNotificationsButtons=document.querySelectorAll(".enable-notifications"),deferredPrompt;function displayConfirmationNotification(){if("serviceWorker"in navigator){let i={body:"You successfully subscribed to our Notification server :)",lang:"en-US",dir:"ltr",icon:"/src/images/icons/app-icon-96x96.png",badge:"/src/images/icons/app-icon-96x96.png",image:"/src/images/sf-boat.jpg",vibrate:[100,50,200],tag:"confirm-notification",renotify:!0,actions:[{action:"confirm",title:"Okay"},{action:"cancel",title:"Cancel"}]};navigator.serviceWorker.ready.then(e=>e.showNotification("subscribed successfully!",i))}}function configurePushSub(){let i;navigator.serviceWorker.ready.then(e=>(i=e).pushManager.getSubscription()).then(e=>{if(!e)return i.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:urlBase64ToUint8Array("BEfFO4nZ8lFmcoIT7vZ9GyXOaMsYcNgVBCzug043zbpefQu0P71kkQ2TNfdiXWssucxdm2i0LZVAjn1RGcBrPpw")})}).then(e=>e&&saveSubscriptionToSupabase(e)).then(()=>displayConfirmationNotification()).catch(e=>console.log(e))}function sendRequestPremission(){Notification.requestPermission(e=>{console.log("User Choice:",e),"denied"===e?console.log("User denied the premission :("):configurePushSub()})}window.Promise||(window.Promise=Promise),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(()=>console.log("Service worker registered!")).catch(e=>console.log(e)),window.addEventListener("beforeinstallprompt",function(e){return console.log("beforeinstallprompt fired"),e.preventDefault(),void 0===deferredPrompt&&(deferredPrompt=e),!1}),"Notification"in window&&"serviceWorker"in navigator&&enableNotificationsButtons.forEach(e=>{e.style.display="inline-block",e.addEventListener("click",sendRequestPremission)});